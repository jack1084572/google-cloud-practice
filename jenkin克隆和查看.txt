åœ¨jenkin free style æ¨¡å¼ä¸‹è¿è¡Œshell
# æ¸…ç†æ—§ä»“åº“
rm -rf jack

# å…‹éš†ä»“åº“
git clone https://github.com/jack1084572/jack.git

# è¿›å…¥ä»“åº“
cd jack

# æ‰“å°å½“å‰ç›®å½•è·¯å¾„
echo "å½“å‰å·¥ä½œç›®å½•æ˜¯ï¼š"
pwd

# æ‰“å°æ–‡ä»¶åˆ—è¡¨
echo "ä»“åº“ä¸­åŒ…å«çš„æ–‡ä»¶ï¼š"
ls -al

# æ‰“å° Git è·Ÿè¸ªçš„æ–‡ä»¶
echo "Git è·Ÿè¸ªçš„æ–‡ä»¶ï¼š"
git ls-files


é…ç½®ngrok
å®‰è£…
curl -sSL https://ngrok-agent.s3.amazonaws.com/ngrok.asc \
  | sudo tee /etc/apt/trusted.gpg.d/ngrok.asc >/dev/null \
  && echo "deb https://ngrok-agent.s3.amazonaws.com buster main" \
  | sudo tee /etc/apt/sources.list.d/ngrok.list \
  && sudo apt update \
  && sudo apt install ngrok
ngrok config add-authtoken 30Qjm4Qh5HBdPpHH1Sy0LRaKHhp_7xDzP7HaUGnKtAM97fNrt

ngrok http 80

nohup ngrok http 80 > ngrok.log 2>&1 &


æ„å»ºå¾ªç¯å®ç°æŸ¥è¯¢ï¼Œåœ¨free styleæ¨¡å¼ä¸‹ï¼Œå‰é¢ä¸éœ€è®¾ç½®
while true; do
# æ¸…ç†æ—§ä»“åº“
rm -rf jack

# å…‹éš†ä»“åº“
git clone https://github.com/jack1084572/jack.git

# è¿›å…¥ä»“åº“
cd jack

# æ‰“å°å½“å‰ç›®å½•è·¯å¾„
echo "å½“å‰å·¥ä½œç›®å½•æ˜¯ï¼š"
pwd

# æ‰“å°æ–‡ä»¶åˆ—è¡¨
echo "ä»“åº“ä¸­åŒ…å«çš„æ–‡ä»¶ï¼š"

ls -al

# æ‰“å° Git è·Ÿè¸ªçš„æ–‡ä»¶
echo "Git è·Ÿè¸ªçš„æ–‡ä»¶ï¼š"
git ls-files

  sleep 10
done


è‡ªåŠ¨åŒ–pinline
1 github repository ä¸‹çš„setting webhook select -- Payload URL * é“¾æ¥æ˜¯ ngrok åœ¨shellä¸Šç”Ÿäº§çš„ioï¼Œåé¢+ github-webhook
2è®¾ç½®jenkinï¼šTriggers check GitHub hook trigger for GITScm polling

ä»¥ä¸‹æ˜¯ä½ åœ¨ **Google Cloud Shell** ä¸Šå®Œæ•´é…ç½®å¹¶ä½¿ç”¨ Git æ¨é€æ–‡ä»¶åˆ° GitHubï¼ˆé€šè¿‡ SSHï¼‰çš„æ‰€æœ‰æ­¥éª¤å’Œå‘½ä»¤ï¼Œæ€»å…±åˆ†ä¸º 5 ä¸ªé˜¶æ®µï¼Œ**ä¸€æ¡ä¸æ¼**ï¼Œé€‚åˆå…¨æ–°å¼€å§‹ã€‚

---

## ğŸªœ ç¬¬1æ­¥ï¼šé…ç½® Git ç”¨æˆ·èº«ä»½ï¼ˆå¿…é¡»ï¼‰

```bash
git config --global user.name "ä½ çš„GitHubç”¨æˆ·å"
git config --global user.email "ä½ çš„GitHubç»‘å®šé‚®ç®±"
```

âœ… æŸ¥çœ‹æ˜¯å¦è®¾ç½®æˆåŠŸï¼š

```bash
git config --list
```

---

## ğŸªœ ç¬¬2æ­¥ï¼šç”Ÿæˆ SSH å¯†é’¥ï¼ˆè‹¥è¿˜æ²¡æœ‰ï¼‰

```bash
ssh-keygen -t rsa -b 4096 -C "ä½ çš„GitHubé‚®ç®±"
```

è¿ç»­æŒ‰ `Enter` å³å¯ï¼ˆé»˜è®¤è·¯å¾„ `~/.ssh/id_rsa`ï¼‰

âœ… æŸ¥çœ‹å…¬é’¥å†…å®¹ï¼ˆå¤åˆ¶ç”¨ï¼‰ï¼š

```bash
cat ~/.ssh/id_rsa.pub
```

---

## ğŸªœ ç¬¬3æ­¥ï¼šå°† SSH å…¬é’¥æ·»åŠ åˆ° GitHubï¼ˆåªéœ€ä¸€æ¬¡ï¼‰

1. æ‰“å¼€ GitHub è®¾ç½®é¡µé¢ï¼š
   ğŸ‘‰ [https://github.com/settings/keys](https://github.com/settings/keys)

2. ç‚¹ `New SSH key`ï¼Œç²˜è´´åˆšåˆšå¤åˆ¶çš„å…¬é’¥å†…å®¹

3. ç‚¹ `Add SSH key` ä¿å­˜

âœ… æµ‹è¯•æ˜¯å¦è¿æ¥æˆåŠŸï¼š

```bash
ssh -T git@github.com
```

æˆåŠŸè¾“å‡ºï¼š

```
Hi jack1084572! You've successfully authenticated...
```

---

## ğŸªœ ç¬¬4æ­¥ï¼šåˆå§‹åŒ–æˆ–å…‹éš†ä»“åº“

### âœ… æ–¹æ³•ä¸€ï¼šå…‹éš†å·²æœ‰ GitHub ä»“åº“ï¼ˆSSH æ–¹å¼ï¼‰

```bash
git clone git@github.com:ä½ çš„ç”¨æˆ·å/ä½ çš„ä»“åº“.git
cd ä½ çš„ä»“åº“å
```

### âœ… æ–¹æ³•äºŒï¼šåœ¨æœ¬åœ°åˆå§‹åŒ–æ–°ä»“åº“å¹¶å…³è” GitHub

```bash
mkdir myproject && cd myproject
git init
git remote add origin git@github.com:ä½ çš„ç”¨æˆ·å/ä½ çš„ä»“åº“.git
```

---

## ğŸªœ ç¬¬5æ­¥ï¼šæ·»åŠ æ–‡ä»¶ã€æäº¤å¹¶æ¨é€

```bash
echo "Hello World" > hello.txt         # åˆ›å»ºæ–‡ä»¶
git add hello.txt                      # æ·»åŠ æ–‡ä»¶
git commit -m "Add hello.txt"          # æäº¤æ›´æ”¹
git push -u origin main                # æ¨é€åˆ° GitHubï¼ˆé¦–æ¬¡å¸¦ -uï¼‰
```

å¦‚æœä½ çš„ä¸»åˆ†æ”¯å« `master` è€Œä¸æ˜¯ `main`ï¼Œè¯·æ›¿æ¢æœ€åä¸€å¥ä¸ºï¼š

```bash
git push -u origin master
```

---

## âœ… é¢å¤–æŒ‡ä»¤ï¼šæŸ¥çœ‹å½“å‰çŠ¶æ€æˆ–å†å²

```bash
git status              # æŸ¥çœ‹å½“å‰çŠ¶æ€
git log --oneline       # ç®€æ´æŸ¥çœ‹å†å²æäº¤è®°å½•
```

---

å¦‚æœä½ éœ€è¦ä¸€é”®æ‰“åŒ… Docker æˆ–åŒæ­¥ Jenkinsï¼Œæˆ‘å¯ä»¥åœ¨è¿™äº›å‘½ä»¤çš„åŸºç¡€ä¸Šä¸ºä½ è¿›ä¸€æ­¥æ‰©å±•è‡ªåŠ¨åŒ–è„šæœ¬ã€‚

æ˜¯å¦è¦æˆ‘å¸®ä½ åˆ›å»º `.sh` è„šæœ¬è‡ªåŠ¨æ‰§è¡Œè¿™å¥—æµç¨‹ï¼Ÿ


åœ¨ **Google Cloud Shell** ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨æ ‡å‡†çš„ Linux å‘½ä»¤æ“ä½œç³»ç»Ÿèµ„æºï¼Œå¹¶é€šè¿‡åå°è¿è¡Œä¿æŒä»»åŠ¡æ´»è·ƒã€‚ä»¥ä¸‹æ˜¯ä½ å¸¸ç”¨çš„å‘½ä»¤æ•´ç†ï¼Œé‡ç‚¹åŒ…å« **æ–‡ä»¶ç®¡ç†ã€ç³»ç»Ÿæ“ä½œã€Gitã€Dockerã€åå°è¿è¡Œ** ç­‰æ–¹é¢ã€‚

---

## âœ… ä¸€ã€æ–‡ä»¶/ç›®å½•æ“ä½œ

| æ“ä½œ       | å‘½ä»¤               |
| -------- | ---------------- |
| æŸ¥çœ‹å½“å‰ç›®å½•   | `pwd`            |
| æŸ¥çœ‹æ–‡ä»¶åˆ—è¡¨   | `ls -al`         |
| è¿›å…¥ç›®å½•     | `cd dirname`     |
| è¿”å›ä¸Šä¸€çº§ç›®å½•  | `cd ..`          |
| åˆ›å»ºç›®å½•     | `mkdir mydir`    |
| åˆ é™¤æ–‡ä»¶     | `rm filename`    |
| åˆ é™¤ç›®å½•     | `rm -rf dirname` |
| åˆ›å»ºæ–‡ä»¶     | `touch filename` |
| æŸ¥çœ‹æ–‡ä»¶å†…å®¹   | `cat filename`   |
| ç¼–è¾‘æ–‡ä»¶ï¼ˆç®€å•ï¼‰ | `nano filename`  |

---

## ğŸ§  äºŒã€åå°è¿è¡Œå‘½ä»¤ï¼ˆä¿æŒ Cloud Shell æ´»åŠ¨ï¼‰

| æ–¹æ³•       | å‘½ä»¤                                  |             |
| -------- | ----------------------------------- | ----------- |
| åå°è¿è¡Œï¼ˆå¸¸ç”¨ï¼‰ | `nohup command > output.log 2>&1 &` |             |
| æŸ¥çœ‹åå°ä»»åŠ¡   | `jobs`                              |             |
| å°†ä»»åŠ¡æ”¾åå°æ‰§è¡Œ | Ctrl + Z ç„¶åè¾“å…¥ `bg`                  |             |
| æ¢å¤ä»»åŠ¡åˆ°å‰å°  | `fg %1`ï¼ˆ1 æ˜¯ä»»åŠ¡ç¼–å·ï¼‰                    |             |
| æŸ¥çœ‹è¿›ç¨‹     | \`ps aux                            | grep name\` |
| æ€æ­»è¿›ç¨‹     | `kill -9 PID`                       |             |

> âœ… `nohup`ï¼šé˜²æ­¢å‘½ä»¤åœ¨ Cloud Shell æ–­å¼€ååœæ­¢ã€‚
> âœ… `&`ï¼šä½¿å‘½ä»¤åœ¨åå°æ‰§è¡Œã€‚

---

### âœ… ç¤ºä¾‹ï¼šåå°è¿è¡Œä¸€ä¸ª HTTP æœåŠ¡å™¨

```bash
nohup python3 -m http.server 8080 > http.log 2>&1 &
```

è¯´æ˜ï¼š

* ä½¿ç”¨ `nohup` ä¿æŒè¿è¡Œ
* `&` æ”¾å…¥åå°
* `http.log` ä¿å­˜è¾“å‡ºæ—¥å¿—

---

## ğŸ”§ ä¸‰ã€Git æ“ä½œï¼ˆæ‹‰å–ã€æ¨é€ï¼‰

| æ“ä½œ       | å‘½ä»¤                                                   |
| -------- | ---------------------------------------------------- |
| å…‹éš†ä»“åº“     | `git clone https://github.com/user/repo.git`         |
| æŸ¥çœ‹çŠ¶æ€     | `git status`                                         |
| æ·»åŠ æ‰€æœ‰æ”¹åŠ¨   | `git add .`                                          |
| æäº¤æ”¹åŠ¨     | `git commit -m "your message"`                       |
| æ¨é€ä»£ç      | `git push origin main`                               |
| è®¾ç½®ç”¨æˆ·å/é‚®ç®± | `git config --global user.name "Your Name"`          |
|          | `git config --global user.email "email@example.com"` |

---

## ğŸ³ å››ã€Docker å‘½ä»¤ï¼ˆCloud Shell é¢„è£…ï¼‰

| æ“ä½œ   | å‘½ä»¤                               |
| ---- | -------------------------------- |
| æŸ¥çœ‹ç‰ˆæœ¬ | `docker --version`               |
| æ‹‰å–é•œåƒ | `docker pull imagename`          |
| æ„å»ºé•œåƒ | `docker build -t myapp .`        |
| è¿è¡Œå®¹å™¨ | `docker run -d -p 8080:80 myapp` |
| æŸ¥çœ‹å®¹å™¨ | `docker ps`                      |
| åœæ­¢å®¹å™¨ | `docker stop container_id`       |
| åˆ é™¤å®¹å™¨ | `docker rm container_id`         |

---

## â˜ï¸ äº”ã€Google Cloud ç›¸å…³å‘½ä»¤ï¼ˆgcloudï¼‰

| æ“ä½œ                   | å‘½ä»¤                                       |
| -------------------- | ---------------------------------------- |
| ç™»å½•                   | `gcloud auth login`                      |
| è®¾ç½®é»˜è®¤é¡¹ç›®               | `gcloud config set project [PROJECT_ID]` |
| åˆ—å‡ºé¡¹ç›®                 | `gcloud projects list`                   |
| åˆ—å‡º Compute Engine å®ä¾‹ | `gcloud compute instances list`          |
| æŸ¥çœ‹å½“å‰é…ç½®ä¿¡æ¯             | `gcloud config list`                     |

---

## ğŸ”„ å…­ã€å®šæ—¶æ‰§è¡Œè„šæœ¬ï¼ˆå¯é€‰ï¼‰

è™½ç„¶ Cloud Shell ä¸æ”¯æŒé•¿æ—¶é—´åå°æœåŠ¡ï¼Œä½†ä½ å¯ä»¥ä½¿ç”¨ `while` + `sleep` å¾ªç¯ï¼š

```bash
while true; do
  echo "æ­£åœ¨åŒæ­¥..."
  git pull origin main
  sleep 60
done
```

---

å¦‚æœä½ å¸Œæœ›ï¼š

* éƒ¨ç½²ç½‘ç«™åˆ° GCP
* Jenkins æŒç»­é›†æˆ
* Cloud Runã€App Engineã€Cloud Build è‡ªåŠ¨éƒ¨ç½²

ä¹Ÿå¯ä»¥ç»§ç»­å‘Šè¯‰æˆ‘ï¼Œæˆ‘å¯ä»¥ä¸ºä½ ç”Ÿæˆå®Œæ•´çš„éƒ¨ç½²æˆ–è‡ªåŠ¨åŒ–æµç¨‹ï¼
